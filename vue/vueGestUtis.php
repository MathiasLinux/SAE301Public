<?php
$title = "Château Bourbon";
ob_start();
?>
    <div class="blocAdminPage">
        <div class="blocAdminCote">
            <a class="header" href="index.php">
                <img src="img/logo.svg" alt="Logo de chateau">
                <h1>Château Bourbon</h1>
            </a>
            <a class="boutonAdminDesktop" href="index.php?action=gestBien">
                <svg id="Calque_2" data-name="Calque 2" xmlns="http://www.w3.org/2000/svg"
                     viewBox="0 0 123.22 109.55">
                    <g id="Calque_1-2" data-name="Calque 1">
                        <g>
                            <path fill="#fff"
                                  d="m0,54.77c15.77-13.8,31.55-27.6,47.32-41.4,4.96-4.34,9.92-8.67,15.3-13.37,20.35,18.45,40.47,36.71,60.59,54.96-2.64,3.64-5.72,4.23-9.06,2.65-2.35-1.11-4.63-2.57-6.57-4.29-13.72-12.18-27.33-24.46-40.99-36.71-1.22-1.09-2.48-2.12-4.02-3.44-1.62,1.31-3.15,2.51-4.63,3.77-15.01,12.7-29.98,25.45-45.03,38.11C7.3,59.77,4.84,59.8,0,55.77,0,55.44,0,55.11,0,54.77Z"/>
                            <path fill="#fff"
                                  d="m62.23,20.57c14.06,12.54,27.68,24.6,41.14,36.83,1.13,1.03,1.77,3.14,1.78,4.76.14,13.91,0,27.82.13,41.72.04,4.04-1.55,5.68-5.58,5.62-9.22-.13-18.45-.04-28.4-.04,0-7.89.02-15.28,0-22.67-.02-6.09-.87-7.05-6.8-7.01-15.59.1-13.74-2-13.87,13.62-.04,4.3.19,8.63-.19,12.9-.1,1.16-1.98,3.04-3.09,3.07-8.93.26-17.86.13-26.8.17-3.02.01-4.05-1.63-4.04-4.39.02-14.57-.04-29.14.07-43.71.01-1.31.67-3.03,1.63-3.85,14.49-12.31,29.08-24.51,44.01-37.03Z"/>
                            <path fill="#fff"
                                  d="m108.9,37.25c-12.07-7.09-13.9-10.96-12.15-24.15.27-.18.52-.5.81-.53q11.35-1.22,11.35,10.18c0,4.57,0,9.14,0,14.5Z"/>
                        </g>
                    </g>
                </svg>
                <div>Gestion des biens</div>
            </a>
            <a class="boutonAdminDesktop" href="index.php?action=gestUti">
                <svg id="User" xmlns="http://www.w3.org/2000/svg" width="27.625" height="27.748"
                     viewBox="0 0 27.625 27.748">
                    <circle fill="#fff" id="Ellipse_4" data-name="Ellipse 4" cx="6.911" cy="6.911" r="6.911"
                            transform="translate(6.901)"/>
                    <path fill="#fff" id="Tracé_26" data-name="Tracé 26"
                          d="M27.625,202.342H0a13.812,13.812,0,0,1,27.625,0Z"
                          transform="translate(0 -174.595)"/>
                </svg>
                <div>Gestions des utilisateurs</div>
            </a>
            <a class="boutonAdminDesktop" href="index.php?action=formContact">
                <svg id="Calque_2" data-name="Calque 2" xmlns="http://www.w3.org/2000/svg"
                     viewBox="0 0 147.09 95.81">
                    <g id="Calque_1-2" data-name="Calque 1">
                        <g>
                            <path fill="#fff"
                                  d="m0,18.99c6.83,3.56,13.73,7,20.47,10.72,16.2,8.93,32.38,17.89,48.42,27.1,3.5,2.01,6.14,1.83,9.53-.09,21.56-12.2,43.22-24.21,64.85-36.28.98-.55,2-1.01,3.53-1.79.11,1.88.27,3.27.27,4.67.02,19.72.02,39.43,0,59.15,0,8.8-4.23,13.23-12.95,13.25-40.4.05-80.81-.04-121.21.09C6.59,95.83,2.82,92.68,0,87.61,0,64.74,0,41.87,0,18.99Z"/>
                            <path fill="#fff"
                                  d="m0,8.05C3.4,1.9,8.57-.04,15.56,0c39.38.25,78.77.11,118.15.13,7.63,0,11.11,2.56,13.08,9.72-16.06,8.96-32.18,17.96-48.31,26.97-7.06,3.94-14.21,7.74-21.14,11.9-2.8,1.68-4.92,1.47-7.66-.07C48.13,36.46,26.49,24.43,4.86,12.37,3.29,11.5,1.62,10.82,0,10.04c0-.66,0-1.33,0-1.99Z"/>
                        </g>
                    </g>
                </svg>
                <div>Formulaire de contact</div>
            </a>
            <a class="boutonAdminDesktop" href="index.php?action=gestBlog">
                <svg id="Calque_2" data-name="Calque 2" xmlns="http://www.w3.org/2000/svg"
                     viewBox="0 0 129.77 147.09">
                    <g id="Calque_1-2" data-name="Calque 1">
                        <path fill="#fff"
                              d="m119.56,147.09H10.17C2.35,143.09-.09,136.73,0,128.03.38,94.75.15,61.45.15,28.16c0-10.16.29-10.47,10.31-11.38.26-.02.5-.39.97-.79,0-1.13-.01-2.45,0-3.77C11.55,2.49,14.08,0,23.91,0c31.49,0,62.97,0,94.46,0,8.42,0,11.24,2.82,11.24,11.29,0,38.92-.19,77.84.15,116.76.08,8.69-2.36,15.06-10.21,19.03Zm-18.85-123.92H6.31c-.08,1.11-.18,1.91-.18,2.71,0,35.24-.03,70.49,0,105.73,0,6.56,3.11,9.5,9.88,9.51,21.36.03,42.71.01,64.07.01,7.43,0,14.04.02,20.73.02,0-5.93-.04-11.41-.06-16.93-.09-28.29-.04-56.59-.04-84.88v-16.18Zm-82.39-6.21c1.56,0,3.34,0,5.12,0,24.34,0,48.69,0,73.03,0,8.8,0,10.14,1.3,10.14,9.86,0,21.02,0,42.04,0,63.06,0,1.16-.33,2.48.11,3.43.53,1.15,1.72,2,2.63,2.98.91-.98,2.22-1.81,2.63-2.97.48-1.33.19-2.94.19-4.43,0-25.32,0-50.65,0-75.97,0-2.25,0-4.5,0-6.98h-5.85c-26.66,0-53.32,0-79.99,0-9.14,0-9.37.25-8.56,9.53.03.31.21.6.54,1.48Zm88.29,85.61c0,10.32-.02,20.23.03,30.14,0,1.1.31,2.29.79,3.29,1.95,4.12,5.32,5.8,9.75,4.96,4.28-.82,6.44-4.17,6.44-9.81.02-39.87.01-79.73,0-119.6,0-1.16.23-2.45-.21-3.43-.4-.88-1.56-1.93-2.41-1.95-.82-.02-2.11,1.03-2.39,1.88-.45,1.36-.28,2.94-.28,4.42-.01,25.97,0,51.94-.02,77.91,0,8.81-2.6,11.56-11.71,12.18Z"/>
                        <path fill="#fff"
                              d="m53.28,133.04c-11.09,0-22.18-.1-33.27.05-4.01.05-5.63-1.47-5.73-5.51-.3-12.03-.4-12.02,11.63-12.02,19.7,0,39.4,0,59.1,0,6.83,0,7.41.58,7.43,7.24,0,1.32,0,2.65.02,3.97.05,4.66-1.37,6.36-6.39,6.35-10.92-.26-21.85-.08-32.78-.08Zm-32.83-10.97c.11,1.89.19,3.42.27,4.79h65.51c-.12-1.8-.22-3.22-.33-4.79"/>
                        <path fill="#fff"
                              d="m30.19,31.81c3.14,0,6.38-.05,9.41-.06,4.56-.03,6.09,1.49,6.07,5.75-.02,6.6,0,13.2-.04,19.8-.02,3.65-1.15,5.33-5.17,5.33-7.1,0-14.17.18-21.3-.02-3.42-.1-4.83-1.45-4.82-4.7.02-7.26.02-14.53,0-21.79,0-3.02,1.17-4.34,4.47-4.36,3.9-.02,7.59.05,11.39.05Zm-9.34,6.06v18.5h18.44v-18.5h-18.44Z"/>
                        <path fill="#fff"
                              d="m53.02,88.24c-10.75,0-21.5.02-32.25-.02-1.47,0-3.29.09-4.33-.54-.85-.52-1.62-1.76-1.61-2.83,0-.73.96-2.14,2.2-2.35,1.08-.19,2.28-.16,3.44-.16,22,0,43.99,0,65.99,0,.5,0,1.05.03,1.47.04,2.1.03,4.18-.21,4.18,2.9s-2.84,2.72-4.36,2.83c-4.77.37-9.58.14-14.38.14-6.78,0-13.56,0-20.34,0Z"/>
                        <path fill="#fff"
                              d="m53.27,99.33c-11.08,0-22.16.13-33.23-.13-.85-.02-2.73-.13-3.74-.62-1.17-.56-1.42-1.54-1.46-2.11-.25-3.55,2.93-3.1,5.38-3.11,22.16,0,44.31-.07,66.47.12,1.81.02,5.05,1.63,5.14,2.71.32,3.64-2.9,3.12-5.33,3.12-11.08.02-22.16,0-33.23,0Z"/>
                        <path fill="#fff"
                              d="m71.45,31.81c5.61,0,11.22-.17,16.81.12,1.32.07,2.56,1.66,3.84,2.55-1.22,1.06-2.43,3.01-3.67,3.04-11.21.23-22.43.23-33.63-.02-1.25-.03-2.46-2.04-3.68-3.13,1.34-.85,2.64-2.37,4.02-2.45,5.43-.29,10.88-.12,16.32-.12Z"/>
                        <path fill="#fff"
                              d="m71.73,49.85c-5.44,0-10.89.2-16.32-.13-1.48-.09-2.86-1.78-4.28-2.74,1.3-1,2.58-2.85,3.89-2.88,11.21-.23,22.42-.22,33.63.02,1.18.03,2.31,2.08,3.47,3.2-1.19.84-2.35,2.35-3.58,2.41-5.59.26-11.21.11-16.81.12Z"/>
                        <path fill="#fff"
                              d="m71.8,62.57c-5.44,0-10.9.21-16.31-.14-1.51-.1-2.91-1.84-4.36-2.83,1.44-1,2.85-2.83,4.31-2.86,10.88-.24,21.76-.25,32.64.01,1.36.03,2.68,2,4.02,3.08-1.33.91-2.61,2.54-3.98,2.61-5.42.3-10.87.13-16.32.13Z"/>
                        <path fill="#fff" d="m86.86,93.49s5.14-.78,4.99,3.34"/>
                    </g>
                </svg>
                <div>Gestion du blog</div>
            </a>
        </div>
    </div>
    <div class="popOver">
        <svg xmlns="http://www.w3.org/2000/svg" width="72" height="72" viewBox="0 0 24 24" fill="none"
             stroke="#ffffff" stroke-width="1.5" stroke-linecap="butt" stroke-linejoin="round">
            <path d="M9 18l6-6-6-6"/>
        </svg>
    </div>
    <main class="mainUti">
        <a class="boutonJaune retourChateaux" href="index.php?action=gestUti">
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                     stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M19 12H6M12 5l-7 7 7 7"/>
                </svg>
                Revenir
            </div>
        </a>
        <?php
        if (isset($_GET["id"]) and isset($utilisateur)) {
            ?>
            <h2 class="adminH2">Modifier <?= $utilisateur["mail"] ?> :</h2>
            <form class="formUtis" action="index.php?action=modifUti&id=<?= $utilisateur["id"] ?>" method="post">
                <div class="gridAjoutUti">
                    <div>
                        <label class="labelAdmin">
                            <p>Adresse Mail</p>
                            <input type="text" name="mail" id="mail" value="<?= $utilisateur["mail"] ?>">
                        </label>
                    </div>
                    <div>
                        <label class="labelAdmin">
                            <p>Ancien mot de passe</p>
                            <input type="password" name="oldPassword" id="oldPassword">
                        </label>
                    </div>
                    <div>
                        <label class="labelAdmin">
                            <p>Nouveau mot de passe</p>
                            <input type="password" name="newPassword" id="newPassword">
                        </label>
                    </div>
                    <div>
                        <label class="labelAdmin">
                            <p>Confirmer votre nouveau mot de passe</p>
                            <input type="password" name="newPassword1" id="newPassword1">
                        </label>
                    </div>
                </div>
                <div class="rolesAdminUtis">
                    <h3 class="adminH3">Rôles</h3>
                    <div class="rolesAdminUtisSelect" id="premierRole">
                        <div>Gestion Bien</div>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="biens" name="biens"
                                   value="yes" <?php
                            if (str_contains($utilisateur["roles"], "biens")) {
                                echo "checked";
                            }
                            ?>>
                        </div>
                    </div>
                    <div class="rolesAdminUtisSelect">
                        <div>Gestion Blog</div>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="blog" name="blog"
                                   value="yes" <?php
                            if (str_contains($utilisateur["roles"], "blog")) {
                                echo "checked";
                            }
                            ?>>
                        </div>
                    </div>
                </div>
                <div class="envoyerContact">
                    <input type="submit" value="Valider">
                </div>
            </form>
            <?php
        } else {
            ?>
            <h2 class="adminH2">Nouvel utilisateur :</h2>
            <form class="formUtis" action="index.php?action=ajoutUti" method="post">
                <div class="gridAjoutUti">
                    <div>
                        <label class="labelAdmin">
                            <p>Adresse Mail</p>
                            <input type="text" name="mail" id="mail" required>
                        </label>
                    </div>
                    <div>
                        <label class="labelAdmin">
                            <p>Mot de passe</p>
                            <input type="password" name="password" id="password" required>
                        </label>
                    </div>
                </div>
                <div class="rolesAdminUtis">
                    <h3 class="adminH3">Rôles</h3>
                    <div class="rolesAdminUtisSelect" id="premierRole">
                        <div>Gestion Bien</div>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="biens" name="biens"
                                   value="yes" checked>
                        </div>
                    </div>
                    <div class="rolesAdminUtisSelect">
                        <div>Gestion Blog</div>
                        <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" id="blog" name="blog"
                                   value="yes" checked>
                        </div>
                    </div>
                </div>
                <div class="envoyerContact">
                    <input type="submit" value="Valider">
                </div>
            </form>
            <?php
        }
        ?>
    </main>
    <script defer src="js/admin.js"></script>
<?php
$contenue = ob_get_clean();

require_once "vue/gabarit/gabarit.php";